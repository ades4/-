<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>QQ农场</title>
		<link rel="stylesheet" href="css/style.css" />
	</head>
	<body>
		<div class="main">
			<div class="table_jz">
				<table>
					<tr>
						<td><img src="img/none.png" id="0" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="1" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="2" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="3" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="4" onclick="ChangeState(this.id)"/> </td>
					</tr>
					<tr>
						<td><img src="img/none.png" id="5" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="6" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="7" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="8" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="9" onclick="ChangeState(this.id)"/> </td>
					</tr>
					<tr>
						<td><img src="img/none.png" id="10" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="11" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="12" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="13" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="14" onclick="ChangeState(this.id)"/> </td>
					</tr>
					<tr>
						<td><img src="img/none.png" id="15" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="16" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="17" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="18" onclick="ChangeState(this.id)"/> </td>
						<td><img src="img/none.png" id="19" onclick="ChangeState(this.id)"/> </td>
					</tr>
					<tr>
						<input type="button" value="播种" onclick="changeStatu(this.value)" />
						<input type="button" value="采摘" onclick="changeStatu(this.value)" />
						<input type="button" value="翻地" onclick="changeStatu(this.value)" />
					</tr>
				</table>
			</div>
		</div>	
		
	</body>
</html>

<script type="text/javascript">
	
	var statu = 1;//默认为播种状态
	
	var allLand = new Array(20);
	for(var i = 0; i < allLand.length; i++)
	{
		allLand[i] = new Array(3);  //二维数组
		allLand[i][0] = 1;    //土地当前状态
		allLand[i][1] = 0;    //土地的生长周期
	}
	
	function ChangeState(id){	
		if(statu == 1)
		{
			if(allLand[id][0] == 1)
			{
				document.getElementById(id).src='img/seed.png';	
				//修改土地状态为发芽
				allLand[id][0] = 2;
				//土地生产周期为10秒
				allLand[id][1] = 10;
				
				grow(id);
			}
			else{
				alert('土地非空闲状态，不能播种');
			}
		}
		if(statu == 4)
		{
			if(allLand[id][0] == 4)
			{
				document.getElementById(id).src='img/harvest.png';	
				//修改土地状态为翻地
				allLand[id][0] = 5;
			}
			else{
				alert('植物没有成熟，不能采摘');
			}
		}
		if(statu == 5)
		{
			if(allLand[id][0] == 5)
			{
				document.getElementById(id).src='img/none.png';	
				//修改土地状态为播种
				allLand[id][0] = 1;
			}
			else{
				alert('植物非采摘状态，不能铲除');
			}
		}
	}

	function grow(id){
		
		if(allLand[id][1] != 0){
			if(allLand[id][1] <= 5){
				document.getElementById(id).src='img/bud.png';
			}
			allLand[id][1]--;
			setTimeout("grow(" +id+ ")",1000);
		}else{
			document.getElementById(id).src='img/flower.gif';	
			allLand[id][0] = 4;
		}		
	}
	
	function changeStatu(sta){
		if(sta == '播种'){
			statu = 1;	
		}
		if(sta == '发芽'){
			statu = 2;	
		}
		if(sta == '结果'){
			statu = 3;	
		}
		if(sta == '采摘'){
			statu = 4;	
		}
		if(sta == '翻地'){
			statu = 5;	
		}
	}
</script>